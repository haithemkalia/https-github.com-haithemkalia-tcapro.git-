{"version":3,"file":"js/main.460c3cc42f56ecfb91fc.js","mappings":"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","sources":["webpack://tca-visa-tracking-system/./static/js/custom.js"],"sourcesContent":["// Custom JavaScript functionality will be added here\r\n// Vercel Speed Insights removed to fix module syntax error\r\n\r\nfunction showLoading() { document.getElementById('loadingOverlay').style.display = 'block'; document.getElementById('loadingSpinner').style.display = 'block'; } function hideLoading() { document.getElementById('loadingOverlay').style.display = 'none'; document.getElementById('loadingSpinner').style.display = 'none'; } document.addEventListener('DOMContentLoaded', function() { const alerts = document.querySelectorAll('.alert'); alerts.forEach(function(alert) { setTimeout(function() { if (typeof bootstrap !== 'undefined') { const bsAlert = new bootstrap.Alert(alert); bsAlert.close(); } }, 5000); }); const contentArea = document.querySelector('.content-area'); if (contentArea) { contentArea.classList.add('fade-in-up'); } }); function confirmDelete(message) { return confirm(message || 'هل أنت متأكد من الحذف؟'); } let updateStatusInProgress = false; function updateStatus(clientId, newStatus) { if (!clientId || !newStatus) { console.error('❌ ID client ou statut manquant'); return; } if (updateStatusInProgress) { console.warn('⚠️ Mise à jour en cours, veuillez patienter'); return; } updateStatusInProgress = true; showLoading(); const controller = new AbortController(); const timeoutId = setTimeout(() => controller.abort(), 10000); fetch('/api/update-status', { method: 'POST', headers: { 'Content-Type': 'application/json', }, body: JSON.stringify({ client_id: clientId, status: newStatus }), signal: controller.signal }) .then(response => { clearTimeout(timeoutId); if (!response.ok) { throw new Error(`HTTP error! status: ${response.status}`); } return response.json(); }) .then(data => { updateStatusInProgress = false; hideLoading(); if (data.success) { const statusElement = document.querySelector(`[data-client-id=\"${clientId}\"] .status-badge`); if (statusElement) { statusElement.textContent = newStatus; statusElement.className = `btn status-badge status-${newStatus.replace(' ', '-')} dropdown-toggle`; } showAlert('تم تحديث الحالة بنجاح! ✅', 'success'); } else { showAlert('خطأ في تحديث الحالة: ' + (data.message || 'خطأ غير معروف'), 'error'); } }) .catch(error => { updateStatusInProgress = false; hideLoading(); if (error.name === 'AbortError') { showAlert('انتهت مهلة الطلب، يرجى المحاولة مرة أخرى', 'error'); } else { console.error('❌ Erreur lors de la mise à jour:', error); showAlert('خطأ في الاتصال بالخادم', 'error'); } }); } function validateForm(formId) { const form = document.getElementById(formId); if (!form) return false; const requiredFields = form.querySelectorAll('[required]'); let isValid = true; requiredFields.forEach(field => { if (!field.value.trim()) { field.classList.add('is-invalid'); isValid = false; } else { field.classList.remove('is-invalid'); } }); return isValid; } const WHATSAPP_REGEX = /^216\\d{8}$/; const TUNISIA_PREFIX = '216'; function validateAndFormatWhatsApp(input) { if (!input || typeof input !== 'string') return ''; let cleaned = input.replace(/\\D/g, ''); if (!cleaned) return ''; if (WHATSAPP_REGEX.test(cleaned)) { return cleaned; } if (cleaned.charAt(0) === '0') { cleaned = TUNISIA_PREFIX + cleaned.substring(1); } else if (!cleaned.startsWith(TUNISIA_PREFIX)) { cleaned = TUNISIA_PREFIX + cleaned; } return WHATSAPP_REGEX.test(cleaned) ? cleaned : null; } function validateWhatsApp(phoneNumber) { const cleaned = phoneNumber.replace(/\\D/g, ''); if (cleaned.length < 8 || cleaned.length > 15) { return false; } return true; } function formatWhatsApp(phoneNumber) { const cleaned = phoneNumber.replace(/\\D/g, ''); if (!cleaned.startsWith('216') && !cleaned.startsWith('218')) { return '216' + cleaned; } return cleaned; } window.TCASystem = { showLoading, hideLoading, confirmDelete, updateStatus, validateForm, validateWhatsApp, formatWhatsApp, validateAndFormatWhatsApp };"],"names":["showLoading","document","getElementById","style","display","hideLoading","addEventListener","querySelectorAll","forEach","alert","setTimeout","bootstrap","Alert","close","contentArea","querySelector","classList","add","updateStatusInProgress","WHATSAPP_REGEX","TUNISIA_PREFIX","window","TCASystem","confirmDelete","message","confirm","updateStatus","clientId","newStatus","controller","AbortController","timeoutId","abort","fetch","method","headers","body","JSON","stringify","client_id","status","signal","then","response","clearTimeout","ok","Error","concat","json","data","success","statusElement","textContent","className","replace","showAlert","error","name","validateForm","formId","form","requiredFields","isValid","field","value","trim","remove","validateWhatsApp","phoneNumber","cleaned","length","formatWhatsApp","startsWith","validateAndFormatWhatsApp","input","test","charAt","substring"],"sourceRoot":""}