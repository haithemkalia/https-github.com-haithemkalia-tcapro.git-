(()=>{function t(){document.getElementById("loadingOverlay").style.display="block",document.getElementById("loadingSpinner").style.display="block"}function e(){document.getElementById("loadingOverlay").style.display="none",document.getElementById("loadingSpinner").style.display="none"}document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".alert").forEach(function(t){setTimeout(function(){"undefined"!=typeof bootstrap&&new bootstrap.Alert(t).close()},5e3)});var t=document.querySelector(".content-area");t&&t.classList.add("fade-in-up")});var n=!1;var r=/^216\d{8}$/,o="216";window.TCASystem={showLoading:t,hideLoading:e,confirmDelete:function(t){return confirm(t||"هل أنت متأكد من الحذف؟")},updateStatus:function(r,o){if(r&&o&&!n){n=!0,t();var a=new AbortController,s=setTimeout(function(){return a.abort()},1e4);fetch("/api/update-status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:r,status:o}),signal:a.signal}).then(function(t){if(clearTimeout(s),!t.ok)throw new Error("HTTP error! status: ".concat(t.status));return t.json()}).then(function(t){if(n=!1,e(),t.success){var a=document.querySelector('[data-client-id="'.concat(r,'"] .status-badge'));a&&(a.textContent=o,a.className="btn status-badge status-".concat(o.replace(" ","-")," dropdown-toggle")),showAlert("تم تحديث الحالة بنجاح! ✅","success")}else showAlert("خطأ في تحديث الحالة: "+(t.message||"خطأ غير معروف"),"error")}).catch(function(t){n=!1,e(),"AbortError"===t.name?showAlert("انتهت مهلة الطلب، يرجى المحاولة مرة أخرى","error"):showAlert("خطأ في الاتصال بالخادم","error")})}},validateForm:function(t){var e=document.getElementById(t);if(!e)return!1;var n=e.querySelectorAll("[required]"),r=!0;return n.forEach(function(t){t.value.trim()?t.classList.remove("is-invalid"):(t.classList.add("is-invalid"),r=!1)}),r},validateWhatsApp:function(t){var e=t.replace(/\D/g,"");return!(e.length<8||e.length>15)},formatWhatsApp:function(t){var e=t.replace(/\D/g,"");return e.startsWith("216")||e.startsWith("218")?e:"216"+e},validateAndFormatWhatsApp:function(t){if(!t||"string"!=typeof t)return"";var e=t.replace(/\D/g,"");return e?r.test(e)?e:("0"===e.charAt(0)?e=o+e.substring(1):e.startsWith(o)||(e=o+e),r.test(e)?e:null):""}}})();
//# sourceMappingURL=main.460c3cc42f56ecfb91fc.js.map